# Система поиска и отправки вакансий

Система для поиска вакансий Product Manager и автоматической отправки в Telegram с возможностью генерации сопроводительных писем.

## Компоненты системы

1. **`ios_vacancies_finder.py`** - Поиск вакансий на различных площадках
2. **`telegram_vacancy_bot.py`** - Telegram бот с обработкой кнопок
3. **`send_vacancies_to_telegram.py`** - Упрощенная отправка вакансий

## Установка

```bash
pip install -r requirements.txt
```

## Использование

### 1. Поиск вакансий

```bash
python3 ios_vacancies_finder.py
```

#### Фильтры вакансий

Вы можете настроить фильтры по зарплате и опыту работы. Добавьте в файл `.env`:

```bash
MIN_SALARY=250000        # Минимальная зарплата (руб.)
MIN_EXPERIENCE_YEARS=3   # Минимальный опыт (лет)
MAX_VACANCIES=20         # Максимальное количество вакансий (по умолчанию 10)
```

Вакансии показываются, если они удовлетворяют **ВСЕМ заданным** фильтрам (И).

Подробнее см. `FILTERS.md`.

Скрипт ищет вакансии на:
- **HeadHunter (hh.ru)** - через API
- **Сбер (career.sber.ru)** - через HH API и парсинг сайта
- **Т-Банк (Tinkoff)** - через HH API и парсинг сайта
- **Aviasales** - через HH API и парсинг сайта
- **Авито (avito.ru)** - через парсинг
- **Habr Career (career.habr.com)** - через парсинг

Результаты сохраняются в файл `product_manager_vacancies.json`.

### 2. Отправка в Telegram

#### Вариант A: Полнофункциональный бот

```bash
export TELEGRAM_BOT_TOKEN="ваш_токен"
export TELEGRAM_CHAT_ID="ваш_chat_id"
python3 telegram_vacancy_bot.py
```

Затем в Telegram:
- `/start` - начало работы
- `/send` - отправить все вакансии

#### Вариант B: Простая отправка

```bash
export TELEGRAM_BOT_TOKEN="ваш_токен"
export TELEGRAM_CHAT_ID="ваш_chat_id"
python3 send_vacancies_to_telegram.py
```

Подробные инструкции по настройке Telegram бота см. в `telegram_setup.md` и `README_TELEGRAM.md`.

### 3. Настройка OpenAI API (опционально)

Для генерации сопроводительных писем с помощью AI можно использовать OpenAI API:

1. Получите API ключ на [platform.openai.com](https://platform.openai.com/api-keys)
2. Добавьте в файл `.env`:
   ```
   OPENAI_API_KEY=sk-ваш_ключ_здесь
   ```

Подробные инструкции см. в `OPENAI_SETUP.md`.

## Особенности

- Автоматическая фильтрация только Product Manager вакансий (исключает Project Manager)
- Поиск через HH API для компаний (более надежный способ)
- Резервный парсинг сайтов компаний, если API не дает результатов
- Удаление дубликатов по URL
- Ограничение до 10 наиболее актуальных вакансий
- Автоматическая генерация сопроводительных писем при нажатии кнопки "Да"

## Примечание

Некоторые сайты могут иметь защиту от парсинга. Для более надежной работы может потребоваться:
- Использование Selenium для динамических страниц
- Настройка прокси
- Обработка капчи
